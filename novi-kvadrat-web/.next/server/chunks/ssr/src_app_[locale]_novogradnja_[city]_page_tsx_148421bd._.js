module.exports=[72053,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(80701),i=a.i(24987),j=a.i(67900),k=a.i(81010),l=a.i(41675),m=a.i(76472),n=a.i(63519),o=a.i(70106);let p=(0,o.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),q=(0,o.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var r=a.i(13749),s=a.i(50522),t=a.i(96221),u=a.i(71987),v=a.i(38246),w=a.i(8247);let x={planning:"bg-gray-100 text-gray-800",u_izgradnji:"bg-blue-100 text-blue-800",siva_faza:"bg-yellow-100 text-yellow-800",useljivo:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800"},y={beograd:"Beograd","novi-sad":"Novi Sad",nis:"Niš",kragujevac:"Kragujevac"};function z(){let a=(0,d.useParams)(),o=(0,d.usePathname)(),{t:z,locale:A}=(0,w.useTranslations)(),B=a.city,C=y[B]||B;o.split("/").filter(Boolean)[0];let D={planning:z("projects.status.planning"),u_izgradnji:z("projects.status.underConstruction"),siva_faza:z("projects.status.grayFrame"),useljivo:z("projects.status.readyToMove"),completed:z("projects.status.completed")},[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(1),[K,L]=(0,c.useState)(1),[M,N]=(0,c.useState)(0),[O,P]=(0,c.useState)("featured"),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)(new Set);(0,c.useEffect)(()=>{console.log("Filter changed, resetting page to 1"),J(1)},[B,O,Q,S]),(0,c.useEffect)(()=>{console.log("Fetching projects with:",{city:B,page:I,sortBy:O,selectedMunicipality:Q,selectedStatus:S}),Y()},[B,I,O,Q,S]);let Y=async()=>{H(!0);try{let a=new URLSearchParams({city:B,page:I.toString(),limit:"12",sort:O});Q&&a.append("municipality",Q),S&&a.append("status",S);let b=await fetch(`/api/projects?${a}`),c=await b.json();c.success&&(F(c.data),L(c.pagination.totalPages),N(c.pagination.total),c.aggregations?.municipalities&&V(c.aggregations.municipalities))}catch(a){console.error("Failed to fetch projects:",a)}finally{H(!1)}},Z=a=>new Intl.NumberFormat("sr-RS",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),$=({project:a})=>(0,b.jsxs)(e.Card,{className:"overflow-hidden hover:shadow-lg transition-shadow flex flex-col h-full",children:[(0,b.jsxs)("div",{className:"relative h-48",children:[a.main_image_url?(0,b.jsx)(u.default,{src:a.main_image_url,alt:a.name,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,b.jsx)(j.Building2,{className:"h-12 w-12 text-gray-400"})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void X(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow hover:shadow-md transition-shadow",children:(0,b.jsx)(m.Heart,{className:`h-5 w-5 ${W.has(a.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),a.featured&&(0,b.jsx)(g.Badge,{className:"absolute top-2 left-2 bg-yellow-500",children:z("projectDetail.featured")})]}),(0,b.jsxs)(e.CardContent,{className:"p-4 flex flex-col flex-1 min-h-0",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)(v.default,{href:`/projekat/${a.slug}`,children:(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2 hover:text-blue-600",children:a.name})}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[(0,b.jsx)(i.MapPin,{className:"h-4 w-4 mr-1"}),a.municipality?.name_sr_lat,", ",a.city?.name_sr_lat]}),a.address&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.address}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)(g.Badge,{className:x[a.construction_status]||"bg-gray-100",children:D[a.construction_status]||a.construction_status}),a.completion_date&&(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4 mr-1"}),new Date(a.completion_date).getFullYear()]})]}),(0,b.jsx)("div",{className:"border-t pt-3 mb-3",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:z("common.from")}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-600",children:a.price_from?Z(a.price_from):z("projects.onRequest")})]}),a.price_per_sqm_from&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:z("common.perSqm")}),(0,b.jsx)("p",{className:"font-semibold",children:Z(a.price_per_sqm_from)})]})]})}),a.developer&&(0,b.jsx)("div",{className:"border-t pt-3 mb-3",children:(0,b.jsxs)(v.default,{href:`/gradjevinar/${a.developer.slug}`,className:"text-sm text-gray-600 hover:text-blue-600 flex items-center",children:[(0,b.jsx)(j.Building2,{className:"h-4 w-4 mr-1"}),a.developer.name,a.developer.is_verified&&(0,b.jsx)(g.Badge,{variant:"outline",className:"ml-2 text-xs",children:z("developer.verified")})]})})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-auto pt-3 border-t",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",className:"flex-1",children:[(0,b.jsx)(n.Phone,{className:"h-4 w-4 mr-1"}),z("common.call")]}),(0,b.jsx)(f.Button,{size:"sm",className:"flex-1",children:z("common.consultation")})]})]})]});return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:[z("nav.newDevelopments")," ",C]}),(0,b.jsx)("p",{className:"text-gray-600",children:z("projects.projectsCount",{count:String(M)})})]})}),(0,b.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.MapPin,{className:"h-4 w-4 text-gray-500"}),(0,b.jsxs)(h.Select,{value:Q||"all",onValueChange:a=>R("all"===a?"":a),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(h.SelectValue,{placeholder:z("projects.filters.allMunicipalities")})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:z("projects.filters.allMunicipalities")}),U.map(a=>(0,b.jsx)(h.SelectItem,{value:a.slug,children:a.name_sr_lat},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Home,{className:"h-4 w-4 text-gray-500"}),(0,b.jsxs)(h.Select,{value:S||"all",onValueChange:a=>T("all"===a?"":a),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:z("projects.filters.allStatuses")}),(0,b.jsx)(h.SelectItem,{value:"u_izgradnji",children:z("projects.status.underConstruction")}),(0,b.jsx)(h.SelectItem,{value:"siva_faza",children:z("projects.status.grayFrame")}),(0,b.jsx)(h.SelectItem,{value:"useljivo",children:z("projects.status.readyToMove")}),(0,b.jsx)(h.SelectItem,{value:"completed",children:z("projects.status.completed")})]})]})]}),(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),z("projects.filters.moreFilters")]}),(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),z("projects.filters.projectsOnMap")]}),(0,b.jsx)("div",{className:"ml-auto",children:(0,b.jsxs)(h.Select,{value:O,onValueChange:P,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"featured",children:z("projects.filters.recommended")}),(0,b.jsx)(h.SelectItem,{value:"price_asc",children:z("projects.filters.priceLowHigh")}),(0,b.jsx)(h.SelectItem,{value:"price_desc",children:z("projects.filters.priceHighLow")}),(0,b.jsx)(h.SelectItem,{value:"newest",children:z("projects.filters.newest")}),(0,b.jsx)(h.SelectItem,{value:"completion",children:z("projects.filters.completionDate")})]})]})})]})})}),(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,b.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Stari Grad"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Vračar"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Novi Beograd"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Zvezdara"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Na rate"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"2025"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:"Povraćaj PDV-a"})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:G?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)(t.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:E.map(a=>(0,b.jsx)($,{project:a},a.id))}),0===E.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(j.Building2,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:z("projects.noProjectsFound")})]}),K>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center mt-8 gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>J(a=>Math.max(1,a-1)),disabled:1===I,className:"w-10 h-10 p-0 text-gray-500 bg-transparent border-gray-300 hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(r.ChevronLeft,{className:"h-4 w-4"})}),Array.from({length:Math.min(5,K)},(a,c)=>{let d;d=K<=5||I<=3?c+1:I>=K-2?K-4+c:I-2+c;let e=I===d;return(0,b.jsx)(f.Button,{variant:e?"default":"outline",size:"sm",onClick:()=>J(d),className:`w-10 h-10 p-0 ${e?"":"text-gray-500 bg-transparent border-gray-300 hover:bg-gray-50 hover:text-gray-700"}`,children:d},d)}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>J(a=>Math.min(K,a+1)),disabled:I===K,className:"w-10 h-10 p-0 text-gray-500 bg-transparent border-gray-300 hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})})]})]})})]})}a.s(["default",()=>z],72053)}];

//# sourceMappingURL=src_app_%5Blocale%5D_novogradnja_%5Bcity%5D_page_tsx_148421bd._.js.map